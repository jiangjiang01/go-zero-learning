# ===================== 商品RPC服务主配置 =====================
# 本配置文件用于 productrpc.rpc 服务的初始化、监听、日志及数据源设置
# 各项参数均含中文注释说明其作用与建议写法，便于维护与调优

# --------------------------------------------------------------------
# 服务名称（Name 用于go-zero服务注册，务必保持唯一性，推荐用“模块名+rpc”格式）
Name: productrpc.rpc   # go-zero内部服务名，影响服务注册与服务发现，推荐唯一，比如 product.rpc

# RPC监听地址及端口
ListenOn: 0.0.0.0:8082 # 0.0.0.0 监听所有网卡，端口为 8082，确保与 docker compose 暴露端口一致

# --------------------------------------------------------------------
# MySQL 数据库连接配置，示例说明如下：
# - root:123456   -> 数据库用户名:密码（建议生产环境使用复杂密码）
# - mysql:3306    -> 容器网络中的服务名:端口（docker compose 中内网互通，非本机127.0.0.1）
# - testdb        -> 默认库名
# - charset=utf8mb4           -> 推荐字符集，支持多语言和 Emoji
# - parseTime=True            -> 启用时间类型自动解析
# - loc=Local                 -> 以本地时区为准
DataSource: root:123456@tcp(mysql:3306)/testdb?charset=utf8mb4&parseTime=True&loc=Local

# --------------------------------------------------------------------
# 日志相关配置
Log:
  ServiceName: productrpc         # 当前服务日志标识（区分不同服务来源，便于日志聚合）
  Mode: file                      # 日志输出方式：console(控制台)、file(本地)、volume(容器卷长期保存)
  Path: logs                      # 日志文件目录（相对路径，便于日志卷挂载与收集）
  Level: info                     # 最低写入日志级别：debug(详细)、info(一般)、error(重要错误)、severe(致命错误)
  Compress: true                  # 是否压缩历史旧日志（减少磁盘空间占用，提高归档效率）
  KeepDays: 7                     # 日志最长保留天数，超期自动清理，建议 7-30 天，防止磁盘爆满
  StackCooldownMillis: 100        # 堆栈错误重复打印冷静期（单位：毫秒，防止同类错误刷屏）